# Откат и срочная публикация сайта

Ошибка «Cannot access '$t' before initialization» на Vercel после многих правок. Чтобы **сразу опубликовать рабочий сайт**, откатите `master` к коммиту, когда сайт ещё работал.

## Перед откатом: сохранить текущее состояние

Чтобы не потерять текущий код (блок бота, правки i18n), создайте ветку:

```powershell
git checkout -b backup-before-rollback
git add -A
git commit -m "Backup before rollback to fix production"
git push origin backup-before-rollback
git checkout master
```

После этого можно спокойно откатывать `master`.

---

## Вариант 1: Откат к состоянию до правок i18n (рекомендуется)

В терминале (в папке проекта):

```powershell
git fetch origin
git checkout master
git pull origin master

# Откатить master к коммиту ДО мержей с правками i18n (проверьте на GitHub, какой деплой был рабочим)
# Ниже — откат на коммит 08490a9 (Merge PR #36, до bot-announcement-2-1 с рефакторингом i18n)
git reset --hard 08490a9

# Принудительный пуш (осторожно: перезапишет историю master на GitHub)
git push origin master --force
```

После этого Vercel задеплоит этот коммит. Если **08490a9** у вас не открывался без ошибки, попробуйте другой коммит из списка ниже.

## Вариант 2: Выбрать другой коммит для отката

Посмотрите историю:

```powershell
git log --oneline -20
```

Подходящие точки (чем выше, тем «старее»):

| Коммит     | Описание |
|-----------|----------|
| `08490a9` | Merge PR #36 (bot-announcement-1) — до рефакторинга i18n |
| `56c85c7` | Integrate i18n support in main application |
| `4ff7f24` | Merge speed-optimisation |
| `6358b36` | Merge PR #34 (bot-feedback-12) |

Подставьте нужный коммит вместо `08490a9` в команде `git reset --hard <коммит>`.

## После отката

1. Откройте сайт на Vercel и убедитесь, что он открывается без ошибки в консоли.
2. Текущие правки (новый блок бота, рефакторинг i18n) останутся в ветках вроде `bot-announcement-2-1` — их можно будет доработать и смержить позже, когда найдётся надёжное решение для ошибки `$t`.

## Если не уверены, какой коммит был рабочим

1. Зайдите в **Vercel Dashboard** → ваш проект → **Deployments**.
2. Посмотрите старые деплои и откройте тот, при котором сайт открывался нормально.
3. В деплое указан коммит (например `56c85c7`) — используйте его в `git reset --hard 56c85c7`.
