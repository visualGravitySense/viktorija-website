# ‚úÖ –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏: Cannot access '$t' before initialization

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ **i18n –ø–æ–ø–∞–¥–∞–ª –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π vendor —á–∞–Ω–∫**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–ª—Å—è **–ø–æ—Å–ª–µ** –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞. –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ race condition, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—ã—Ç–∞–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `t()` –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ i18n –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. i18n –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–∞–Ω–¥–ª–µ (–Ω–µ –≤ vendor —á–∞–Ω–∫–µ)

**–§–∞–π–ª:** `vite.config.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
```typescript
manualChunks(id) {
  // –ö–†–ò–¢–ò–ß–ù–û: i18n –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–ï–†–í–´–ú –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç undefined
  // –≠—Ç–æ –ø–æ–º–µ—â–∞–µ—Ç i18n –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–Ω–¥–ª (index.js), –∞ –Ω–µ –≤ vendor —á–∞–Ω–∫
  if (id.includes('i18next') || id.includes('react-i18next') || id.includes('i18next-browser-languagedetector')) {
    return undefined; // –í –æ—Å–Ω–æ–≤–Ω–æ–º –±–∞–Ω–¥–ª–µ
  }
  
  // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —á–∞–Ω–∫–æ–≤...
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** i18n —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–¥–æ–º, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è i18n

**–§–∞–π–ª:** `src/i18n/i18n.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `i18n.isInitialized`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω `initImmediate: true` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** i18n –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
```bash
# –£–¥–∞–ª–∏—Ç—å dist
Remove-Item -Recurse -Force dist

# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à Vite
Remove-Item -Recurse -Force node_modules/.vite
```

### –®–∞–≥ 2: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
```bash
npm run build
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–Ω–¥–ª–∞
–û—Ç–∫—Ä–æ–π—Ç–µ `dist/assets/index-*.js` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ i18n –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ, –∞ –Ω–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º vendor —á–∞–Ω–∫–µ.

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å preview
```bash
npm run preview
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å
- ‚úÖ **–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:** "Cannot access '$t' before initialization"
- ‚úÖ **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** i18n —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** –ü–µ—Ä–µ–≤–æ–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. ‚úÖ **i18n –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–∞–Ω–¥–ª–µ** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å React
2. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** - i18n –≥–æ—Ç–æ–≤ –¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
3. ‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `t()`
4. ‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–Ω–¥–ª–∞

–ü–æ—Å–ª–µ –±–∏–ª–¥–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª:** `dist/assets/index-*.js`
   - –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–¥ i18n
   - –†–∞–∑–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ (—Ç.–∫. –≤–∫–ª—é—á–∞–µ—Ç i18n)

2. **Vendor —Ñ–∞–π–ª—ã:** `dist/assets/vendor-*.js`
   - –ù–ï –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å i18n –∫–æ–¥
   - i18n –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `vendor-react` –∏–ª–∏ –¥—Ä—É–≥–∏—Ö vendor —á–∞–Ω–∫–∞—Ö

3. **Network tab:**
   - i18n –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –±–∞–Ω–¥–ª–æ–º
   - –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è i18n

---

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞:**
```
index.js (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥) ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
  ‚Üì –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å t()
vendor-i18n.js ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ
  ‚Üì $t –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
‚ùå –û—à–∏–±–∫–∞!
```

**–†–µ—à–µ–Ω–∏–µ:**
```
index.js (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ + i18n) ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ
  ‚Üì i18n –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
  ‚Üì $t –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
```

---

## üö® –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∏–º–ø–æ—Ä—Ç–æ–≤
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `main.tsx`:
```typescript
import './i18n/i18n' // –î–û –∏–º–ø–æ—Ä—Ç–∞ App
import App from './App.tsx'
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–∫–ª—é—á–∏—Ç—å –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—é –≤—Ä–µ–º–µ–Ω–Ω–æ
–í `vite.config.ts`:
```typescript
minify: false, // –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
```typescript
// –í main.tsx
await import('./i18n/i18n');
```

–ù–æ —ç—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π.

---

## ‚úÖ –ò—Ç–æ–≥

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!**

- ‚úÖ i18n –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–∞–Ω–¥–ª–µ
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

**–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç, –æ—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ - –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å!** üéâ
